name: CI Windows
on: [push, pull_request]
jobs:
    build:
        runs-on: windows-latest
        strategy:
            fail-fast: false
            matrix:
                include: [
                    { msystem: MINGW64, arch: x86_64 },
                    { msystem: MINGW32, arch: i686   }
                ]
        defaults:
            run:
                shell: msys2 {0}
        steps:
        - uses: actions/checkout@v2
        - uses: msys2/setup-msys2@v2
          with:
            msystem: ${{ matrix.msystem }}
            install: git base-devel mingw-w64-${{ matrix.arch }}-toolchain
            update: true
        - uses: olafurpg/setup-scala@v7
        - name: Compile
          run: sbt compile
        - name: Test
          run: sbt test
